# Version 8.0.0
- New: Engines can operate more efficiently using vectorization by means of numpy arrays (floats operation still supported)
- New: Arguments that can be [float | numpy arrays] are now of type fl.Scalar (see fuzzylite/types.py)
- New: Arguments that can only be arrays of floats are now fl.ScalarArray (see fuzzylite/types.py)
- New: fl.scalar converts any argument to a numpy array
- New: fl.array maps to np.array
- New: fl.to_float converts any argument to a float, which is the old behaviour of Op.scalar.
- New: Arc and SemiEllipse terms.
- Using `from __future__ import annotations` in every file to use better type annotations
- Changed: Dual license: GNU GPL and paid proprietary license for commercial purposes
- Changed: Requires Python >=3.9
- Changed: All enum values are automatically assigned with enum.auto(), instead of manual assignments
- Changed: Almost all classes redefine __repr__ to return constructors in Python using the new library.Representation class
- Changed: Almost all classes redefine __str__ to return the equivalent FuzzyLite Language (if available)
- Changed: Many more tests and better structures for tests
- Changed: Aggregation operator is now used in TakagiSugeno/Tsukamoto engines on activations of the same term


## __init__.py
- Changed: library `__name__` is now `fuzzylite`, it was incorrectly `pyfuzzylite` before but such a package does not exist
- Changed: fl.inf, fl.nan, fl.isnan, fl.isinf now map to their numpy equivalents
- Changed: fl.isnan and fl.isinf moved to Op (use now: fl.Op.isnan, fl.Op.isinf)
- Changed: fl.inf and fl.nan moved to library.py
- Removed: fl.lib. See library.py for settings

## activation.py
- New: Only General activation support vector operations, other methods require float operations (as before)
- Changed: Activation is abstract
- Removed: Activation.class_name, use now Op.class_name when needed

## defuzzifier.py
- Bug fix: Weighted defuzzifiers infer the type correctly now (see WeightedDefuzzifier::infer_type)
- Changed: Defuzzifier is abstract, and hence so are IntegralDefuzzifier and WeightedDefuzzifier
- Changed: Integral defuzzifiers work on vectors
- Changed: Integral defuzzifiers use 1000 steps instead of 100
- Changed: Algorithms to compute BiSector, Centroid, MeanOfMaximum, and WeightedAverage are simplified
- Changed: values of WeightedDefuzzifier.Type are enum.auto() instead of manual assignments
- Changed: `WeightedDefuzzifier`s to compute weighted sum|average on `Aggregated.grouped_terms()` instead of all terms (see Aggregated term)
- Removed: Defuzzifier.class_name, use now Op.class_name when needed

## engine.py
- New: Properties Engine.input_values and Engine.output_values produce 2D matrices with their respective values
- New: Property setter Engine.input_values provides shortcuts to setting input variable values
- New: constructor parameter `load:bool=True` to automatically update the reference of all terms in variables and load the rules
- Changed: values of Engine.Type are enum.auto() instead of manual assignments
- Changed: method signature from `str` to `str|int` for Engine.[input_variable | output_variable | rule_block] to also get them by index

## exporter.py
- New: PythonExporter exports engine in a single-statement constructor
- New: Examples in Python are wrapped in `create() -> fl.Engine` to avoid instantiation on loading library
- Changed: Examples in Python are converted to single-statement constructor
- Changed: Exporter is abstract
- Changed: Discrete term exported as `Discrete.create(name: str, values: dict[float, float])`
- Removed: Exporter.class_name, use now Op.class_name when needed

## factory.py
- New: Arc and SemiEllipse added to TermFactory
- New: ConstructionFactory.import_from automatically imports all the classes from the given fuzzylite module
- New: ConstructionFactory.construct takes variadic parameters to configure the constructor
- Changed: ConstructionFactory takes an optional dictionary of constructors
- Changed: CloningFactory takes an optional dictionary of objects
- Changed: FunctionFactory: Operators and Functions now mostly map to their equivalent methods in numpy, but preserving their names
- Removed: ConstructionFactory.class_name and CloningFactory.class_name, use now Op.class_name when needed

## hedges.py
- Changed: Hedge is abstract
- Changed: Vectorized all hedges

## library.py
- Removed: Library class
- New: methods fl.scalar, fl.to_float, and fl.array
- New: Settings class for the library configuration, and a `settings` final instance that is used across the library
- New: Settings.float_type for the type of floats across the library is now np.float64, instead of the previous Python float
- New: Settings.debugging is a property to get and set the debugging for logging purposes
- New: Settings.rtol for relative tolerance across the library is 0.0
- New: Settings.context to change settings within a specific context (eg, `with settings.context(decimals=10): ...`)
- New: Information class that contains information about the library, and an `information` final instance to access the information
- New: Representation class to represent objects as constructors in Python
- New: fl.library.repr is a shortcut to use the representation class
- New: Representation class contains a FuzzyLite Language Exporter
- Changed: Settings.atol for absolute tolerance across the library is now 1e-03, instead of the previous abs_tolerance=1e-05

## norm.py
- Changed: Norm is abstract, and so are SNorm and TNorm
- Changed: Vectorized all norms
- Removed: Norm.class_name, use now Op.class_name when needed

## operation.py
- New: `midpoints` method to discretize a range of values into a list of midpoints
- New: Op.is_close method to compare two values with absolute and relative tolerance given by the library settings
- New: Op.class_name method to get the class name of the given object
- Changed: Removed `decimals` parameter from `Op.str()`
- Changed: Vectorized all comparative operations (eq, neq, lt, le, gt, ge)
- Changed: empty identifiers now return "_" instead of "unnamed" (see `as_identifier(name:str)`
- Removed tolerance from all comparative operations (eq, neq, lt, le, gt, ge)
- Removed: `pi` method.
- Removed: `slots` parameter in `describe` method.
- Removed: `scalar` method, moved to `library.py`

## rule.py
- Changed: Expression is abstract
- Changed: Enabled vectorization
- Changed: in `Rule`, `triggered` is now an array of bools and `activation_degrees` is now a Scalar to support vectorization

## term.py
- Fix: Bug in Concave.Tsukamoto
- New: Arc edge and SemiEllipsis terms
- New: `_parse` method to parse configuration parameters
- New: Discrete.to_list, Discrete.to_dict, Discrete.to_xy
- New: Discrete.create to create a Discrete term from a list, dict or pairs
- New: `Aggregated.group_terms()` groups multiple activations of the same term and aggregates them using the aggregation operator.
- Changed: Term is abstract
- Changed: All terms are vectorized, ie, membership and tsukamoto functions return fl.Scalar
- Changed: All equations are simplified and use numpy
- Changed: Tsukamoto functions use the term's height
- Change: Term.tsukamoto now raises exception if the term is not monotonic, before it returned the membership function value
- Change: Term.discretize now discretizes by default using midpoints
- Change: Activated.degree is a property now that automatically replaces nan and inf values
- Change: Discrete.values are now a numpy array instead of list of Discrete.Pair
- Change: Discrete.membership interpolates with numpy, which takes the first or last y-value for x-values beyond range
- Removed: Term.class_name, use now Op.class_name when needed
- Removed: Discrete.Pair
- Removed: Discrete.pairs_from, Discrete.values_from, Discrete.dict_from, Discrete.list_from

## new: types.py
- New: fl.Scalar type to support float and numpy arrays
- New: fl.ScalarArray type to support numpy arrays of floats
- New: fl.Array (mapping to np.NDArray) to support numpy arrays of any type

## variable.py
- New: constructor argument `value` in Variable, InputVariable, and OutputVariable (default: nan)
- New: constructor argument `previous_value` in OutputVariable (default: nan)
- Changed: OutputVariable.defuzzify is simpler and works with vectorized operations

## noxfile.py
- New: default sessions to run tests
- New: pyright session to run type checking
- Changed: simplified command texts

## pyproject.py
- New: numpy as a dependency
- New: pyright configuration
- Removed: pyhamcrest dependency for tests
